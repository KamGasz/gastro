<!DOCTYPE html>
<html lang="pl">
<head>
    <style>
        /* ... (poprzednie style: header, grid, modal, colors, toast, drawer) ... */

        .related-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .related-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .related-carousel {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
            -webkit-overflow-scrolling: touch;
        }

        /* Ukrycie paska przewijania dla estetyki AKS Home */
        .related-carousel::-webkit-scrollbar { display: none; }

        .related-item {
            min-width: 120px;
            max-width: 120px;
            cursor: pointer;
        }

        .related-item img {
            width: 100%;
            aspect-ratio: 1/1;
            object-fit: cover;
            border-radius: 8px;
            background: var(--aks-gray);
        }

        .related-item-name {
            font-size: 11px;
            margin-top: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .related-item-price {
            font-size: 11px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="modal-content" id="modal">
    <span class="close-modal" onclick="closeQuickView()">&times;</span>
    <div class="modal-grid">
        <img src="" id="modalImg" class="modal-img">
        <div>
            <h2 id="modalTitle" style="margin:0; font-size: 18px;"></h2>
            <p id="modalPrice" style="color: var(--aks-text-light); font-weight: bold;"></p>
        </div>
    </div>
    
    <p class="variant-label">Kolor: <span id="selectedColorName" style="color: #000; font-weight: bold;">Czarny</span></p>
    <div class="color-selector">
        <div class="color-option color-black active" onclick="selectColor(this, 'Czarny')"></div>
        <div class="color-option color-red" onclick="selectColor(this, 'Czerwony')"></div>
        <div class="color-option color-white" onclick="selectColor(this, 'Biały')"></div>
    </div>

    <p class="variant-label">Rozmiar:</p>
    <div class="size-selector">
        <div class="size-box" onclick="selectSize(this)">38</div>
        <div class="size-box selected" onclick="selectSize(this)">40</div>
        <div class="size-box" onclick="selectSize(this)">42</div>
    </div>

    <button class="add-to-cart" id="finalAddToCartBtn">DODAJ DO KOSZYKA</button>

    <div class="related-section">
        <div class="related-title">Może Ci się spodobać</div>
        <div class="related-carousel" id="relatedCarousel">
            </div>
    </div>
</div>

<script>
    // Baza wszystkich produktów do karuzeli
    const allProducts = [
        { title: "Nike Air Max", price: "429 zł", img: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400" },
        { title: "Vans Old Skool", price: "299 zł", img: "https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=400" },
        { title: "Air Jordan 1", price: "599 zł", img: "https://images.unsplash.com/photo-1549298916-b41d501d3772?w=400" },
        { title: "Adidas Ultraboost", price: "749 zł", img: "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=400" },
        { title: "Puma Classic", price: "349 zł", img: "https://images.unsplash.com/photo-1539185441755-769473a23570?w=400" }
    ];

    // Funkcja otwierania podglądu (zaktualizowana o karuzelę)
    function openQuickView(title, price, img) {
        currentProduct = { title, price: parseInt(price), img };
        
        document.getElementById('modalTitle').innerText = title;
        document.getElementById('modalPrice').innerText = price;
        document.getElementById('modalImg').src = img;
        
        renderRelated(title); // Generuj rekomendacje (wykluczając obecny produkt)

        document.getElementById('overlay').style.display = 'block';
        setTimeout(() => document.getElementById('modal').classList.add('active'), 10);
    }

    function renderRelated(currentTitle) {
        const carousel = document.getElementById('relatedCarousel');
        const related = allProducts.filter(p => p.title !== currentTitle);
        
        carousel.innerHTML = related.map(p => `
            <div class="related-item" onclick="switchToProduct('${p.title}', '${p.price}', '${p.img}')">
                <img src="${p.img}">
                <div class="related-item-name">${p.title}</div>
                <div class="related-item-price">${p.price}</div>
            </div>
        `).join('');
    }

    // Funkcja pozwalająca "przeskoczyć" na inny produkt wewnątrz modala
    function switchToProduct(title, price, img) {
        // Płynna zmiana treści bez zamykania okna
        const modal = document.getElementById('modal');
        modal.style.opacity = '0';
        setTimeout(() => {
            openQuickView(title, price, img);
            modal.style.opacity = '1';
        }, 200);
    }

    // Pozostałe funkcje (selectColor, selectSize, addToCart, toggleCart, toast) pozostają bez zmian
</script>

</body>
</html>
